<!doctype html><html>
<head>
<title>
flutter-unity-view-widget使用问题和解决办法汇总 :: 放飞熊的博客
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name=revised content="2021-09-24T09:01:15 UTC">
<meta name=description content>
<title>flutter-unity-view-widget使用问题和解决办法汇总 :: 放飞熊的博客</title>
<link rel="shortcut icon" href=/images/favicon.png type=image/x-icon>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css>
<script src=https://code.jquery.com/jquery-3.5.1.min.js></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/layout.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.main.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.menu.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/notice.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/tabs.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/panel.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/columns.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/children.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/attachments.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/alert.css>
<link rel=stylesheet type=text/css href=/css/docport.css>
<script src=/js/docport.js></script>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
</head>
<body data-url=/unity3d/flutter-unity-view-wiget/>
<style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style>
<header>
<div>
<div class="burger single">
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
</div>
<div>
<a class=baselink href=https://fangfeixiong.github.io/>放飞熊的博客</a>
</div>
</div>
</header>
<article>
<aside class=single>
<div class=search>
<div class=searchbox>
<input data-search-input id=search-by type=text placeholder="Type to search...">
</div>
<script type=text/javascript src=/vendor/lunr/lunr.min.js></script>
<script type=text/javascript src=/vendor/auto-complete/auto-complete.js></script>
<link href=/vendor/auto-complete/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
<script type=text/javascript src=/js/search.js></script>
</div>
<div id=close_menu>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">
<i class="fa fa-lg fa-times"></i>
</a>
</div>
<ul class=menu>
<li data-nav-id=https://fangfeixiong.github.io/unity3d/ class="dd-item parent haschildren
item_level_$level">
<i class="fas fa-chevron-down ddexp"></i>
<a href=/unity3d/>Unity3ds</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/unity3d/flutter-unity-view-wiget/ class="dd-item parent active
item_level_$level">
<a href=/unity3d/flutter-unity-view-wiget/>flutter-unity-view-widget使用问题和解决办法汇总</a>
</li>
</ul>
</li>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/weixin-mini/>Weixin-minis</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_2/ class="dd-item
item_level_$level">
<a href=/weixin-mini/tips_2/>微信小程序开发Tips_2</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_1/ class="dd-item
item_level_$level">
<a href=/weixin-mini/tips_1/>微信小程序开发Tips_1</a>
</li>
</ul>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/ios/>IOS</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/ios/fmdb-use/ class="dd-item
item_level_$level">
<a href=/ios/fmdb-use/>FMDB的使用</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/privacy/ class="dd-item
item_level_$level">
<a href=/ios/privacy/>iOS 隐私使用说明（Privacy Usage Description）</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/reachability/ class="dd-item
item_level_$level">
<a href=/ios/reachability/>iOS判断是否连接网络</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/doubleclick-input-scalechange/ class="dd-item
item_level_$level">
<a href=/ios/doubleclick-input-scalechange/>WKWebView 禁用双击缩放和横向滚动</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/is-ipad/ class="dd-item
item_level_$level">
<a href=/ios/is-ipad/>判断当前设备是否是iPad</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/in-app-purchase/ class="dd-item
item_level_$level">
<a href=/ios/in-app-purchase/>苹果内购流程</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/visitor-can-recharge/ class="dd-item
item_level_$level">
<a href=/ios/visitor-can-recharge/>苹果审核，关于未登录时购买内容，引导登录时需要提供游客充值的入口</a>
</li>
</ul>
</li>
</ul>
</aside>
<section class="page single">
<nav id=ariane aria-label=breadcrumb>
<ol class=ariane>
<li>
<a class=text-link href=https://fangfeixiong.github.io/>
Home
</a>
</li>
<li>
<a class=text-link href=/unity3d/>
Unity3ds
</a>
</li>
<li class=active>
flutter-unity-view-widget使用问题和解决办法汇总
</li>
</ol>
</nav>
<h1>flutter-unity-view-widget使用问题和解决办法汇总</h1>
<div class=jump-to-section>
<span onclick="$h=$(this),$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right'})})">
<span class="fas fa-align-right"></span>
Jump to Section
<i class="fas fa-chevron-right"></i>
</span>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#微信小程序分享到android朋友圈的beta版功能的使用问题>微信小程序分享到Android朋友圈的Beta版功能的使用问题</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=content>
<h3 ref=微信小程序分享到android朋友圈的beta版功能的使用问题>微信小程序分享到Android朋友圈的Beta版功能的使用问题</h3><a class=anchor id=微信小程序分享到android朋友圈的beta版功能的使用问题></a>
<blockquote>
<h4 ref=解决办法><strong>解决办法</strong></h4><a class=anchor id=解决办法></a>
</blockquote>
<ul>
<li>找到Build.cs文件，路径如下:
Assets > FlutterUnityIntegration > Editor > Build.cs.</li>
</ul>
<blockquote>
<p>对于iOS,找到BuildIOS()函数， 按如下方式进行修改:</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Swift data-lang=Swift><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> void BuildIOS(String path)
{
        <span style=color:#66d9ef>if</span> (Directory.Exists(path))
            Directory.Delete(path, <span style=color:#66d9ef>true</span>);

        EditorUserBuildSettings.iOSBuildConfigType = iOSBuildType.Release;

        <span style=color:#66d9ef>var</span> options = BuildOptions.AcceptExternalModificationsToPlayer;
        <span style=color:#66d9ef>var</span> report = BuildPipeline.BuildPlayer(
            GetEnabledScenes(),
            path,
            BuildTarget.iOS,
            options
        );
......
</code></pre></div><blockquote>
<ul>
<li>将这一行代码</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Swift data-lang=Swift><span style=color:#66d9ef>var</span> options = BuildOptions.AcceptExternalModificationsToPlayer;
</code></pre></div><blockquote>
<ul>
<li>替换为下面的代码</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Swift data-lang=Swift><span style=color:#66d9ef>var</span> options = BuildOptions.AllowDebugging;
</code></pre></div><blockquote>
<p>替换后如下所示</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Swift data-lang=Swift><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> void BuildIOS(String path)
{
        <span style=color:#66d9ef>if</span> (Directory.Exists(path))
            Directory.Delete(path, <span style=color:#66d9ef>true</span>);

        EditorUserBuildSettings.iOSBuildConfigType = iOSBuildType.Release;
        <span style=color:#75715e>//修改了这里</span>
        <span style=color:#66d9ef>var</span> options = BuildOptions.AllowDebugging;

        <span style=color:#66d9ef>var</span> report = BuildPipeline.BuildPlayer(
            GetEnabledScenes(),
            path,
            BuildTarget.iOS,
            options
        );

......
</code></pre></div><blockquote>
<p>对于Android,找到DoBuildAndroid()函数， 按如下方式进行修改:</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Kotlin data-lang=Kotlin><span style=color:#66d9ef>public</span> static void DoBuildAndroid(String buildPath, bool isPlugin)
{
        <span style=color:#66d9ef>if</span> (Directory.Exists(apkPath))
            Directory.Delete(apkPath, <span style=color:#66d9ef>true</span>);

        <span style=color:#66d9ef>if</span> (Directory.Exists(androidExportPath))
            Directory.Delete(androidExportPath, <span style=color:#66d9ef>true</span>);

        EditorUserBuildSettings.androidBuildSystem = AndroidBuildSystem.Gradle;

        <span style=color:#66d9ef>var</span> options = BuildOptions.AcceptExternalModificationsToPlayer;
        <span style=color:#66d9ef>var</span> report = BuildPipeline.BuildPlayer(
            GetEnabledScenes(),
            apkPath,
            BuildTarget.Android,
            options
        );

<span style=color:#f92672>......</span>
</code></pre></div><ul>
<li>将这一行代码</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>var</span> options = BuildOptions.AcceptExternalModificationsToPlayer;
</code></pre></div><ul>
<li>替换为下面的代码</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>var</span> options = BuildOptions.AllowDebugging;
EditorUserBuildSettings.exportAsGoogleAndroidProject = <span style=color:#66d9ef>true</span>;

</code></pre></div><blockquote>
<p>修改后:</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>public</span> static void DoBuildAndroid(String buildPath, bool isPlugin)
{
        <span style=color:#66d9ef>if</span> (Directory.Exists(apkPath))
            Directory.Delete(apkPath, <span style=color:#66d9ef>true</span>);

        <span style=color:#66d9ef>if</span> (Directory.Exists(androidExportPath))
            Directory.Delete(androidExportPath, <span style=color:#66d9ef>true</span>);

        EditorUserBuildSettings.androidBuildSystem = AndroidBuildSystem.Gradle;

        <span style=color:#75715e>//修改了这里
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> options = BuildOptions.AllowDebugging;
        EditorUserBuildSettings.exportAsGoogleAndroidProject = <span style=color:#66d9ef>true</span>;

        <span style=color:#66d9ef>var</span> report = BuildPipeline.BuildPlayer(
            GetEnabledScenes(),
            apkPath,
            BuildTarget.Android,
            options
        );

<span style=color:#f92672>......</span>
</code></pre></div>
</div>
<div class=chevrons>
<a class=next href=/weixin-mini/ title=Weixin-minis style=margin-right:0>
<div>
<p>Next page</p>
<label>Weixin-minis</label>
</div>
<i class="fas fa-arrow-right" style=font-size:1.7em></i></a>
</div>
</section>
<section class="right-menu single">
<div class=TableOfContents>
<label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label>
<nav>
<ul>
<li><a href=/unity3d/flutter-unity-view-wiget/>flutter-unity-view-widget使用问题和解决办法汇总</a></li>
</ul>
</nav>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#微信小程序分享到android朋友圈的beta版功能的使用问题>微信小程序分享到Android朋友圈的Beta版功能的使用问题</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=Actions>
<nav>
<ul>
<li>
<i class="fas fa-calendar"></i>
Last update on 24 September 2021
</li>
</ul>
</nav>
</div>
</section>
</article>
<footer>
Create a content/_layout/footer/_index.md file to customize the footer content !
</footer>
</body>
</html>