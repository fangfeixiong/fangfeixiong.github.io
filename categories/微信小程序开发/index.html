<!doctype html><html>
<head>
<title></title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name=revised content="2021-09-24T09:01:16 UTC">
<meta name=description content>
<title>微信小程序开发 :: 放飞熊的博客</title>
<link rel="shortcut icon" href=/images/favicon.png type=image/x-icon>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css>
<script src=https://code.jquery.com/jquery-3.5.1.min.js></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/layout.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.main.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.menu.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/notice.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/tabs.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/panel.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/columns.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/children.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/attachments.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/alert.css>
<link rel=stylesheet type=text/css href=/css/docport.css>
<script src=/js/docport.js></script>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
</head>
<body data-url=/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/>
<style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style>
<header>
<div>
<div class=burger>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
</div>
<div>
<a class=baselink href=https://fangfeixiong.github.io/>放飞熊的博客</a>
</div>
</div>
</header>
<article>
<aside>
<div class=search>
<div class=searchbox>
<input data-search-input id=search-by type=text placeholder="Type to search...">
</div>
<script type=text/javascript src=/vendor/lunr/lunr.min.js></script>
<script type=text/javascript src=/vendor/auto-complete/auto-complete.js></script>
<link href=/vendor/auto-complete/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
<script type=text/javascript src=/js/search.js></script>
</div>
<div id=close_menu>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">
<i class="fa fa-lg fa-times"></i>
</a>
</div>
<ul class=menu>
<li data-nav-id=https://fangfeixiong.github.io/unity3d/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/unity3d/>Unity3ds</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/unity3d/flutter-unity-view-wiget/ class="dd-item
item_level_$level">
<a href=/unity3d/flutter-unity-view-wiget/>flutter-unity-view-widget使用问题和解决办法汇总</a>
</li>
</ul>
</li>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/weixin-mini/>Weixin-minis</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_2/ class="dd-item
item_level_$level">
<a href=/weixin-mini/tips_2/>微信小程序开发Tips_2</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_1/ class="dd-item
item_level_$level">
<a href=/weixin-mini/tips_1/>微信小程序开发Tips_1</a>
</li>
</ul>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/ios/>IOS</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/ios/fmdb-use/ class="dd-item
item_level_$level">
<a href=/ios/fmdb-use/>FMDB的使用</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/privacy/ class="dd-item
item_level_$level">
<a href=/ios/privacy/>iOS 隐私使用说明（Privacy Usage Description）</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/reachability/ class="dd-item
item_level_$level">
<a href=/ios/reachability/>iOS判断是否连接网络</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/doubleclick-input-scalechange/ class="dd-item
item_level_$level">
<a href=/ios/doubleclick-input-scalechange/>WKWebView 禁用双击缩放和横向滚动</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/is-ipad/ class="dd-item
item_level_$level">
<a href=/ios/is-ipad/>判断当前设备是否是iPad</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/in-app-purchase/ class="dd-item
item_level_$level">
<a href=/ios/in-app-purchase/>苹果内购流程</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/visitor-can-recharge/ class="dd-item
item_level_$level">
<a href=/ios/visitor-can-recharge/>苹果审核，关于未登录时购买内容，引导登录时需要提供游客充值的入口</a>
</li>
</ul>
</li>
</ul>
</aside>
<section class=page>
<div class="extra-pagination inner">
<nav class=pagination role=navigation>
<span class=page-number>Page 1 of 1</span>
</nav>
</div>
<article class="post weixin-mini">
<header class=post-header>
<h2 class=post-title><a href=/weixin-mini/tips_2/>微信小程序开发Tips_2</a></h2>
</header>
<section class=post-excerpt>
<p>微信小程序分享到Android朋友圈的Beta版功能的使用问题 现在做的小程序的项目详情页引用了很多第三方的组件，导致分享到朋友圈的落地页无法完整显示，因为微信分享到朋友圈功能只能支持部分微信小程序的原生组件(详情见: 微信官方文档分享到朋友圈Beta) 分享到朋友圈的页面路径是固定无法更改的，从页面A唤起的分享到朋友圈，朋友圈进入的落地页就展示的页面A的内容，点击前往小程序也会进入页面A。 那么如何将很复杂的页面分享到朋友圈，又能解决朋友圈进入的落地页按照预期的显示，不会错乱了。我做了如下一系列操作，这个思路供大家参考，如果有更好的方法大家可以给我留言哦！
第一步 能够唤起朋友圈的分享，我习惯在onLoad的时候调用 showShareMenu 方法，代码如下: 注意 shareTimeline 只对Android起作用。
onLoad: function(options) { //同时给分享菜单加入 分享给朋友 和 分享给朋友圈 wx.showShareMenu({ menus: ["shareAppMessage", "shareTimeline"] }); } 第二步 实现页面时间处理函数 onShareTimeline , 这个函数是返回自定义的分享内容, 分享的标题、自定义的额参数和分享的图片等。 1. 返回的 query 属性是页面路径携带的参数，不是页面路径哦，之前我这里理解错误，导致做了很多无用功。 2. 这里的 query 我携带了两个参数: target_id: 分享的页面需要的参数，用来请求详情数据 is_timeline: 用来判断是否是朋友圈加载的落地页或者 前往小程序 按钮进入的
具体代码如下:
onShareTimeline: function() { return { title: '分享标题', query: 'target_id=1&is_timeline=1', image: 'https://path.jpg', } } 第三步 修改 data 和 onLoad 函数 <a class=read-more href=/weixin-mini/tips_2/>&#187;</a></p>
</section>
<footer class=footline>
</footer>
</article>
<article class="post weixin-mini">
<header class=post-header>
<h2 class=post-title><a href=/weixin-mini/tips_1/>微信小程序开发Tips_1</a></h2>
</header>
<section class=post-excerpt>
<p>自定义组件加载慢 和 wx.switchTab 无法传递参数的问题
问题1 Page页面使用了自定义组件，自定义组件中又使用了Vant的Popup组件，导致Page启动时非常缓慢。如果不提前加载自定义组件，后面点击弹出的时候就会很缓慢。 解决办法 可以给Vant Popup 外面嵌套一个 View 运用wx:if 控制这个View合适加载，在onReady方法中，启动嵌套的这个View 在WXML中给自定义组件嵌套一个View 用wx:if 控制合适加载 &lt;view wx:if="{{filter_loading}}"> &lt;filter id="filter" show="{{filter_show}}"> &lt;/filter> &lt;/view> 在js的onReady中启用这个View的加载 onReady: function () { this.setData({filter_loading: true}) } 问题2 小程序控制切换底部Tabbar的时候，有时候我们想给对应的页面传递参数，让Tabbar切换后的页面做一些特殊的展示，但是wx.switchTab 无法传递参数。 解决办法 此时我们可以使用wx.reLaunch方法传递参数，关闭所有页面，打开需要的Tabbar页面 wx.reLaunch({ url: path + "?tab=1", }) 在对应的页面接收参数 Page({ onLoad (option) { console. <a class=read-more href=/weixin-mini/tips_1/>&#187;</a></p>
</section>
<footer class=footline>
</footer>
</article>
<div style=margin-bottom:2rem></div>
<nav class=pagination role=navigation>
<span class=page-number>Page 1 of 1</span>
</nav>
</section>
<section class=right-menu>
</section>
</article>
<footer>
Create a content/_layout/footer/_index.md file to customize the footer content !
</footer>
</body>
</html>