---
layout: single
title:  "苹果审核，关于未登录时购买内容，引导登录时需要提供游客充值的入口"
date:   2017-06-24 09:00
categories: iOS开发
---

#### 遇到问题

* 嗨糖 1.2.2 提交审核被苹果拒了，原因是 用户购买内容时，强制用户登录后充值，而没有提供游客充值的入口。
如下图所示：

![问题图片](imgQuestion.png)

* 点击 <strong>去登录</strong> 按钮后, 我们直接跳转到了登录页面，这个是不允许的。


#### 解决问题

* 按照苹果的规则，我们在点击去登录按钮后，加了一个中间提示选择界面。提示用户登录后充值才是有效充值，未登录情况下的充值将不会被记录，明确告知用户风险。

* 然后提供了 <strong> 游客充值 </strong> 或 <strong>登录</strong> 两个入口，游客充值按钮 尽量的小而且不显眼，因为那里进入充值也是白充的。然后把登录做的大一些，尽量显眼，让用户知道要点击登录按钮，才是正确的。

如下图所示：

 ![解决后的图片](imgResolve.png)

* 游客充值： 会直接跳转到充值也，可以完整的走通苹果的充值流程，但是结果我们不会发给后端也不会存储。因为我们完全不知道它是谁。

* 登录：跳转到登录页面，登录成功后，制动返回当前章节页。
