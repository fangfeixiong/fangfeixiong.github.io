<!doctype html><html>
<head>
<title>
微信小程序开发Tips_1 :: 放飞熊的博客
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name=revised content="2021-09-07T07:34:13 UTC">
<meta name=description content>
<title>微信小程序开发Tips_1 :: 放飞熊的博客</title>
<link rel="shortcut icon" href=/images/favicon.png type=image/x-icon>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css>
<script src=https://code.jquery.com/jquery-3.5.1.min.js></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/layout.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.main.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/css/style.menu.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/notice.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/tabs.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/panel.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/columns.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/children.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/attachments.css>
<link rel=stylesheet type=text/css href=https://fangfeixiong.github.io/sass/shortcodes/alert.css>
<link rel=stylesheet type=text/css href=/css/docport.css>
<script src=/js/docport.js></script>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
</head>
<body data-url=/weixin-mini/tips_1/>
<style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style>
<header>
<div>
<div class="burger single">
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
</div>
<div>
<a class=baselink href=https://fangfeixiong.github.io/>放飞熊的博客</a>
</div>
</div>
</header>
<article>
<aside class=single>
<div class=search>
<div class=searchbox>
<input data-search-input id=search-by type=text placeholder="Type to search...">
</div>
<script type=text/javascript src=/vendor/lunr/lunr.min.js></script>
<script type=text/javascript src=/vendor/auto-complete/auto-complete.js></script>
<link href=/vendor/auto-complete/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://fangfeixiong.github.io/"</script>
<script type=text/javascript src=/js/search.js></script>
</div>
<div id=close_menu>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">
<i class="fa fa-lg fa-times"></i>
</a>
</div>
<ul class=menu>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/ class="dd-item parent haschildren
item_level_$level">
<i class="fas fa-chevron-down ddexp"></i>
<a href=/weixin-mini/>Weixin-minis</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_2/ class="dd-item
item_level_$level">
<a href=/weixin-mini/tips_2/>微信小程序开发Tips_2</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/weixin-mini/tips_1/ class="dd-item parent active
item_level_$level">
<a href=/weixin-mini/tips_1/>微信小程序开发Tips_1</a>
</li>
</ul>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/ class="dd-item haschildren
item_level_$level">
<i class="fas fa-chevron-right ddexp"></i>
<a href=/ios/>IOS</a>
<ul>
<li data-nav-id=https://fangfeixiong.github.io/ios/fmdb-use/ class="dd-item
item_level_$level">
<a href=/ios/fmdb-use/>FMDB的使用</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/privacy/ class="dd-item
item_level_$level">
<a href=/ios/privacy/>iOS 隐私使用说明（Privacy Usage Description）</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/reachability/ class="dd-item
item_level_$level">
<a href=/ios/reachability/>iOS判断是否连接网络</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/doubleclick-input-scalechange/ class="dd-item
item_level_$level">
<a href=/ios/doubleclick-input-scalechange/>WKWebView 禁用双击缩放和横向滚动</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/is-ipad/ class="dd-item
item_level_$level">
<a href=/ios/is-ipad/>判断当前设备是否是iPad</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/in-app-purchase/ class="dd-item
item_level_$level">
<a href=/ios/in-app-purchase/>苹果内购流程</a>
</li>
<li data-nav-id=https://fangfeixiong.github.io/ios/visitor-can-recharge/ class="dd-item
item_level_$level">
<a href=/ios/visitor-can-recharge/>苹果审核，关于未登录时购买内容，引导登录时需要提供游客充值的入口</a>
</li>
</ul>
</li>
</ul>
</aside>
<section class="page single">
<nav id=ariane aria-label=breadcrumb>
<ol class=ariane>
<li>
<a class=text-link href=https://fangfeixiong.github.io/>
Home
</a>
</li>
<li>
<a class=text-link href=/weixin-mini/>
Weixin-minis
</a>
</li>
<li class=active>
微信小程序开发Tips_1
</li>
</ol>
</nav>
<h1>微信小程序开发Tips_1</h1>
<div class=jump-to-section>
<span onclick="$h=$(this),$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right'})})">
<span class="fas fa-align-right"></span>
Jump to Section
<i class="fas fa-chevron-right"></i>
</span>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=content>
<p>自定义组件加载慢 和 wx.switchTab 无法传递参数的问题</p>
<h4 ref=问题1>问题1</h4><a class=anchor id=问题1></a>
<ul>
<li>Page页面使用了自定义组件，自定义组件中又使用了Vant的Popup组件，导致Page启动时非常缓慢。如果不提前加载自定义组件，后面点击弹出的时候就会很缓慢。</li>
</ul>
<blockquote>
<h5 ref=解决办法>解决办法</h5><a class=anchor id=解决办法></a>
<ul>
<li>可以给Vant Popup 外面嵌套一个 View 运用wx:if 控制这个View合适加载，在onReady方法中，启动嵌套的这个View</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>在WXML中给自定义组件嵌套一个View 用wx:if 控制合适加载</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>        &lt;<span style=color:#f92672>view</span> <span style=color:#a6e22e>wx:if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{filter_loading}}&#34;</span>&gt;
            &lt;<span style=color:#f92672>filter</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filter&#34;</span> <span style=color:#a6e22e>show</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{filter_show}}&#34;</span>&gt;
            &lt;/<span style=color:#f92672>filter</span>&gt;
        &lt;/<span style=color:#f92672>view</span>&gt;
</code></pre></div><blockquote>
<ul>
<li>在js的onReady中启用这个View的加载</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>      <span style=color:#a6e22e>onReady</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> () {
        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setData</span>({<span style=color:#a6e22e>filter_loading</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>})
      }
</code></pre></div><h4 ref=问题2>问题2</h4><a class=anchor id=问题2></a>
<ul>
<li>小程序控制切换底部Tabbar的时候，有时候我们想给对应的页面传递参数，让Tabbar切换后的页面做一些特殊的展示，但是wx.switchTab 无法传递参数。</li>
</ul>
<blockquote>
<h5 ref=解决办法-1>解决办法</h5><a class=anchor id=解决办法-1></a>
<ul>
<li>此时我们可以使用wx.reLaunch方法传递参数，关闭所有页面，打开需要的Tabbar页面</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>      <span style=color:#a6e22e>wx</span>.<span style=color:#a6e22e>reLaunch</span>({
        <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;?tab=1&#34;</span>,
      })
</code></pre></div><blockquote>
<ul>
<li>在对应的页面接收参数</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>    <span style=color:#a6e22e>Page</span>({
      <span style=color:#a6e22e>onLoad</span> (<span style=color:#a6e22e>option</span>) {
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>option</span>.<span style=color:#a6e22e>tab</span>)
      }
    })
</code></pre></div>
</div>
<div class=chevrons>
<a class=next href=/ios/ title=IOS style=margin-right:0>
<div>
<p>Next page</p>
<label>IOS</label>
</div>
<i class="fas fa-arrow-right" style=font-size:1.7em></i></a>
</div>
</section>
<section class="right-menu single">
<div class=TableOfContents>
<label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label>
<nav>
<ul>
<li><a href=/weixin-mini/tips_1/>微信小程序开发Tips_1</a></li>
</ul>
</nav>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=Actions>
<nav>
<ul>
<li>
<i class="fas fa-calendar"></i>
Last update on 30 August 2021
</li>
</ul>
</nav>
</div>
</section>
</article>
<footer>
Create a content/_layout/footer/_index.md file to customize the footer content !
</footer>
</body>
</html>